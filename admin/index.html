<!doctype html>
<html lang="en" ng-app="panoramaManager">
<head>
    <meta charset="utf-8">
    <title>Pano-manager</title>

    <link rel="stylesheet" href="../bower_components/foundation/css/normalize.css">
    <link rel="stylesheet" href="../bower_components/foundation/css/foundation.css">
    <style>
        .row {
            max-width: 80rem;
        }

        #editModal .texture-preview {
            cursor: pointer;
        }
    </style>

    <!-- libs -->
    <script src="../bower_components/angular/angular.js"></script>
    <script src="../bower_components/angular-resource/angular-resource.min.js"></script>
    <script src="../bower_components/angular-route/angular-route.min.js"></script>
    <script src="../bower_components/angular-file-upload/angular-file-upload.min.js"></script>
    <script src="../bower_components/jquery/dist/jquery.min.js"></script>
    <script src="../bower_components/foundation/js/foundation.min.js"></script>

    <!-- engine -->
    <script src="./app.js"></script>
</head>
<body ng-controller="PanoramasCtrl">

<nav class="top-bar" data-topbar role="navigation">
    <ul class="title-area">
        <li class="name">
            <h1><a href="#">Panoramas Manager</a></h1>
        </li>
        <!-- Remove the class "menu-icon" to get rid of menu icon. Take out "Menu" to just have icon alone -->
        <li class="toggle-topbar menu-icon"><a href="#"><span>Menu</span></a></li>
    </ul>

    <section class="top-bar-section">
        <!-- Right Nav Section -->
        <ul class="right">
            <li><a href="#">Exit</a></li>
        </ul>

        <ul class="left">
            <li><a href="#" ng-click="new()" class="button tiny success">New</a></li>
        </ul>
    </section>
</nav>

<div class="row">
    <div class="large-12 columns">
        <table>
            <thead>
            <tr>
                <th width="50">ID</th>
                <th width="200">Image</th>
                <th>Name</th>
                <th>File</th>
                <th width="200">Points</th>
                <th width="180">Actions</th>
            </tr>
            </thead>
            <tbody>
            <tr ng-repeat="pano in panoramas">
                <td>{{pano.id}}</td>
                <td>
                    <a class="th" ng-href="/api/textures/{{pano.file}}">
                        <img ng-src="/api/textures/{{pano.file}}">
                    </a>
                </td>
                <td>{{pano.name}}</td>

                <td>{{pano.file}}</td>
                <td>{{pano.points}}</td>
                <td>
                    <ul class="button-group round">
                        <li><a href="#" class="tiny button success" ng-click="edit(pano)">Edit</a></li>
                        <li><a href="#" class="tiny button alert" ng-click="remove(pano)">Remove</a></li>
                    </ul>
                </td>
            </tr>
            </tbody>
        </table>
    </div>
</div>

<div id="editModal" class="reveal-modal" data-reveal>
    <h2>Panorama edit</h2>

    <form name="panoForm">
        <div class="row">
            <div class="large-12 columns">

                <div class="row">
                    <div class="large-4 columns">
                        <label>ID (filled automatically)
                            <input disabled ng-model="model.id" type="text">
                        </label>
                    </div>
                    <div class="large-4 columns">
                        <label>Name
                            <input ng-model="model.name" type="text" required>
                        </label>
                    </div>
                    <div class="large-4 columns">
                        <div ng-if="!uploader.queue[0] && !model.file">
                            <label>File
                                <input type="file" required nv-file-select uploader="uploader">
                            </label>
                        </div>

                        <div ng-if="uploader.queue[0]">
                            <div ng-thumb="{ file: uploader.queue[0]._file, width: 284 }"
                                 ng-click="uploader.queue[0].remove()"
                                 class="texture-preview" title="Click for removing"></div>
                        </div>

                        <div ng-if="model.file">
                            <img ng-src="/api/textures/{{model.file}}"
                                 ng-click=""
                                 class="texture-preview" title="Click for removing"/>
                        </div>

                    </div>
                </div>

            </div>
        </div>
        <div class="row">
            <div class="large-5 columns">
                <textarea ng-model="model.description"></textarea>
            </div>
            <div class="large-2 large-offset-5 columns">
                <input class="button tiny success right" type="submit" ng-click="save()"/>
            </div>
        </div>
    </form>
    <a class="close-reveal-modal" ng-click="cancel()">&#215;</a>
</div>

</body>
</html>